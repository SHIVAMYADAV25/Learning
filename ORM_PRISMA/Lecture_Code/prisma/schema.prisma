// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

// Defines the generator for Prisma Client. The 'prisma-client-js' provider ensures that Prisma generates a JavaScript/TypeScript client for interacting with the database.


generator client {
  // client  represnt all the function that convert the syntax code into real SQL query
  provider = "prisma-client"
  output   = "../generated/prisma"
}

// Defines the database connection details. In this case, we are using a PostgreSQL database.
// The connection URL is stored in an environment variable (DATABASE_URL), which ensures security and flexibility.
datasource db {
  provider = "postgresql"
}

// Defines the 'User' model, which maps to a database table.
model User {
  id          Int @default(autoincrement()) @id // Primary key, auto-incremented for unique identification.
  username    String @unique                // A unique username for each user.
  password    String                       // Stores the user's password.
  age         Int                          // Stores the user's age as an integer.
  city        String?                      // An optional field for the user's city (can be null).
  todos       Todo[]                       // Establishes a one-to-many relationship with the 'Todo' model.
}



// Defines the 'Todo' model, which maps to another database table.
model Todo {
  id          Int @default(autoincrement()) @id // Primary key, auto-incremented for unique identification.
  title       String                        // The title of the todo item.
  description String                        // A detailed description of the todo item.
  userId      Int                           // A foreign key referencing the associated user (not explicitly defined as a relation here).
  user        User @relation(fields: [userId], references: [id]) // Defines the relationship to the 'User' model, linking 'userId' to the 'id' in 'User'.
  
  // time      DateTime @default(now())      // If this field is added later, it will require a default value for new todos.
  // Note: To avoid errors for old records without a timestamp, you can make this field optional using `?`. Otherwise, only new records will require a timestamp.
}

// yaha pai user aur todo array ka column nhi baane wala bas in logog ka realtion baataya gaya hai
// ki user table mai todo ka array hoag mean (one user can have many todo)
// todo mai bola hai ki the feild user ID is related to Id shown in the user table
// so it will be having the ID number of the user tabel



// next step migration => npx prisma migrate dev give the name of migration
// this kinda ouput will u get
// The following migration(s) have been created and applied from new schema changes:    

// prisma\migrations/
//   └─ 20251216161307_initailze/
//     └─ migration.sql

// Your database is now in sync with your schema.



/* Notes:
  1. When you run `npx prisma init`, this schema file is automatically created. 
     - You need to configure the database URL in the `.env` file to connect to your database.
  
  2. The schema acts as a blueprint for defining the structure of your database tables (documentation-style declaration).

  3. After defining your schema, run `npx prisma migrate dev` to create migration files.
     - This generates a migration file and automatically applies it to your database, creating tables that match the schema.

  4. Anytime you make changes to the schema (e.g., adding, modifying fields), you must run `npx prisma migrate dev` again.
     - This keeps the database schema in sync with your Prisma schema.

  5. After setting up your models, generate the Prisma client by running `npx prisma generate`.
     - This creates the client in your `node_modules` directory, which you can use in your code to interact with the database.
*/


/*

what is prisma Client ?
a types javascript or typescript API that talks to your database

Instalation of prisma client
npm install @prisma/client


instead of writting SQL like:
  - SELECT * FROM Todo WHERE done = false;

we will write
  - const todos = await prisma.todo.findMany({
      where: { done: false }
    })

What does prisma generate do?
When you run:

  - npx prisma generate
  - # or with bun
  - bunx prisma generate


Prisma:
  - Reads your schema.prisma
  - Looks at all your models (User, Todo, etc.)
  - Generates code for Prisma Client

Saves it in:
  - node_modules/@prisma/client


That code is what you import and use in your app.

Why do we need to “generate” the client?
  - Because Prisma is schema-first.

Whenever you change:
  - a model
  - a field
  - a relation

Prisma must regenerate the client so:
  * TypeScript types stay correct
  * Autocomplete matches the schema
  * Invalid queries become TypeScript errors

*/